# Практика / Занятие 18 / Проектирование API

## Задание №1

Доска: [https://pruffme.com/landing/u4433834/tmp1727275134](https://pruffme.com/landing/u4433834/tmp1727275134) 

Спроектировать для приложения для заказа цветов:

1. Метод для запроса списка букетов

2. Метод для создания нового букета

3. Метод для изменения существующего букета

4. Метод для создания заказа

**Параметры букета**: id, название, фотографии, текстовое описание, категория, теги, состав букета: какие цветы, сколько штук, стоимость букета, размеры букета: высота, ширина

**Параметры заказа**: фио покупателя, номер телефона, товары: список букетов, стоимость каждого, кол-во каждого, общая стоимость, инфо о доставке: адрес, дата, время, стоимость

## Задание №2

Доска: [https://my.mts-link.ru/boards/board/2414fc13-af06-42cb-96c1-f958ef599b6e](https://my.mts-link.ru/boards/board/2414fc13-af06-42cb-96c1-f958ef599b6e) (запасной вариант)

Необходимо спроектировать API для интернет-магазина книг "BookStore".

API должно предоставлять доступ к следующим функциям:

1. Каталог книг  
   1. Получение списка книг с возможностью фильтрации по жанру.  
   2. Получение детальной информации о книге, включая название, автора и цену.  
2. Управление корзиной  
   1. Добавление книги в корзину по её ID.  
   2. Просмотр текущего содержимого корзины.  
   3. Удаление книги из корзины.

**Задание**:

1. Определение методов API:  
   1. Укажите URL-структуру для каждого метода.  
   2. Определите, какой HTTP-метод (GET, POST, DELETE) использовать для каждого действия.  
2. Структура ответов и ошибок:  
   1. Определите формат успешного ответа (в JSON-формате) для каждого метода.  
   2. Придумайте простую структуру ответа для ошибок (например, с указанием кода ошибки и сообщения).  
3. Документация:  
   1. Описать каждый метод: его URL, HTTP-метод, параметры запроса и формат ответа.

**Пример API**

Вот пример API для упрощенного задания:

\---

\#\#\# API для интернет-магазина "BookStore"

\#\#\#\# 1\. Получение списка книг

\- \*\*URL:\*\* \`/api/books\`

\- \*\*Метод:\*\* \`GET\`

\- \*\*Описание:\*\* Получает список книг с возможностью фильтрации по жанру.

\#\#\#\#\# Параметры запроса:

\- \`genre\` (необязательный) — фильтрация по жанру книг.

\#\#\#\#\# Пример запроса:

\`\`\`http

GET /api/books?genre=fantasy

\`\`\`

\#\#\#\#\# Пример ответа:

\`\`\`json

{

  "books": \[

    {

      "id": 1,

      "title": "Harry Potter and the Philosopher's Stone",

      "author": "J.K. Rowling",

      "price": 9.99

    },

    {

      "id": 2,

      "title": "The Hobbit",

      "author": "J.R.R. Tolkien",

      "price": 12.50

    }

  \]

}

\`\`\`

\#\#\#\#\# Ошибки:

\- Код 400: Неверный параметр запроса (например, неверный жанр).

\---

\#\#\#\# 2\. Получение детальной информации о книге

\- \*\*URL:\*\* \`/api/books/{id}\`

\- \*\*Метод:\*\* \`GET\`

\- \*\*Описание:\*\* Получает полную информацию о книге по её ID.

\#\#\#\#\# Пример запроса:

\`\`\`http

GET /api/books/1

\`\`\`

\#\#\#\#\# Пример ответа:

\`\`\`json

{

  "id": 1,

  "title": "Harry Potter and the Philosopher's Stone",

  "author": "J.K. Rowling",

  "price": 9.99,

  "genre": "fantasy",

  "description": "A young wizard's journey begins."

}

\`\`\`

\#\#\#\#\# Ошибки:

\- Код 404: Книга не найдена.

\---

\#\#\#\# 3\. Добавление книги в корзину

\- \*\*URL:\*\* \`/api/cart\`

\- \*\*Метод:\*\* \`POST\`

\- \*\*Описание:\*\* Добавляет книгу в корзину по её ID.

\#\#\#\#\# Параметры тела запроса:

\- \`book\_id\` (обязательный) — ID книги, которую нужно добавить.

\#\#\#\#\# Пример запроса:

\`\`\`http

POST /api/cart

Content-Type: application/json

{

  "book\_id": 1

}

\`\`\`

\#\#\#\#\# Пример ответа:

\`\`\`json

{

  "message": "Book added to cart",

  "cart": {

    "items": \[

      {

        "book\_id": 1,

        "quantity": 1

      }

    \]

  }

}

\`\`\`

\#\#\#\#\# Ошибки:

\- Код 400: Неверный ID книги.

\- Код 404: Книга не найдена.

\---

\#\#\#\# 4\. Просмотр содержимого корзины

\- \*\*URL:\*\* \`/api/cart\`

\- \*\*Метод:\*\* \`GET\`

\- \*\*Описание:\*\* Возвращает содержимое текущей корзины.

\#\#\#\#\# Пример запроса:

\`\`\`http

GET /api/cart

\`\`\`

\#\#\#\#\# Пример ответа:

\`\`\`json

{

  "cart": {

    "items": \[

      {

        "book\_id": 1,

        "title": "Harry Potter and the Philosopher's Stone",

        "quantity": 1,

        "price": 9.99

      }

    \],

    "total": 9.99

  }

}

\`\`\`

\#\#\#\#\# Ошибки:

\- Код 404: Корзина пуста.

\---

\#\#\#\# 5\. Удаление книги из корзины

\- \*\*URL:\*\* \`/api/cart/{book\_id}\`

\- \*\*Метод:\*\* \`DELETE\`

\- \*\*Описание:\*\* Удаляет книгу из корзины по её ID.

\#\#\#\#\# Пример запроса:

\`\`\`http

DELETE /api/cart/1

\`\`\`

\#\#\#\#\# Пример ответа:

\`\`\`json

{

  "message": "Book removed from cart",

  "cart": {

    "items": \[\]

  }

}

\`\`\`

\#\#\#\#\# Ошибки:

\- Код 400: Неверный ID книги.

\- Код 404: Книга не найдена в корзине.

